{% if card_layout == 'vertical' %}
  <div class="bg-white rounded-lg shadow overflow-hidden flex flex-col min-h-[180px]">
    <div class="w-full h-40 bg-gray-100 flex items-center justify-center">
      {% with first_image=product.images.first %}
        {% if first_image %}
          <img src="{{ first_image.image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover">
        {% else %}
          <span class="text-xs text-gray-500">Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±</span>
        {% endif %}
      {% endwith %}
    </div>

    <div class="p-2 flex-grow flex flex-col justify-between">
      <h3 class="font-bold text-xs line-clamp-2">{{ product.name }}</h3>

      {% if product.discount_percent > 0 %}
        <div class="flex items-center justify-between mt-1">
          <p class="text-discount-dark text-xs line-through">
            {{ product.persian_price }} ØªÙˆÙ…Ø§Ù†
          </p>
          <span class="bg-color-dark text-white text-xs font-bold px-2 py-0.5 rounded whitespace-nowrap">
            {{ product.discount_percent }}%
          </span>
        </div>
        <p class="text-color-light font-bold text-xs mt-1">
          {{ product.persian_final_price }} ØªÙˆÙ…Ø§Ù†
        </p>
      {% else %}
        <div class="h-6"></div>
        <p class="text-color-light font-bold text-xs mt-1">
          {{ product.persian_price }} ØªÙˆÙ…Ø§Ù†
        </p>
      {% endif %}

      {% if product.stock == 0 %}
        <p class="text-red-500 text-xs mt-1">Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯</p>
      {% endif %}
    </div>
  </div>

{% elif card_layout == 'horizontal' %}
  <div class="flex w-full min-h-24 bg-white rounded-lg shadow overflow-hidden">
    <div class="w-24 h-full bg-gray-100 flex items-center justify-center flex-shrink-0">
      {% with first_image=product.images.first %}
        {% if first_image %}
          <img src="{{ first_image.image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover">
        {% else %}
          <span class="text-xs text-gray-500">Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±</span>
        {% endif %}
      {% endwith %}
    </div>

    <div class="flex-1 flex flex-col justify-between p-2 text-right">
      <h3 class="font-bold text-sm line-clamp-1">{{ product.name }}</h3>

      {% if item %}
        <div class="flex items-center justify-end">
          <span class="text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded">
            ØªØ¹Ø¯Ø§Ø¯: {{ item.quantity }}
          </span>
        </div>
      {% endif %}

      <div class="flex items-center gap-2 justify-end">
        {% if product.discount_percent > 0 %}
          <p class="text-gray-400 text-xs line-through">
            {{ product.persian_price }}
          </p>
          <span class="bg-color-dark text-white text-xs font-bold px-1.5 py-0.5 rounded">
            {{ product.discount_percent }}%
          </span>
          <p class="text-color-light font-bold text-sm">
            {{ product.persian_final_price }} ØªÙˆÙ…Ø§Ù†
          </p>
        {% else %}
          <p class="text-color-light font-bold text-sm">
            {{ product.persian_price }} ØªÙˆÙ…Ø§Ù†
          </p>
        {% endif %}
      </div>

      {% if item %}
        <p class="text-xs text-gray-500">
          Ø¬Ù…Ø¹ Ø§ÛŒÙ† Ú©Ø§Ù„Ø§: {{ item.persian_total_price }} ØªÙˆÙ…Ø§Ù†
        </p>
      {% endif %}
    </div>

    {% if item %}
      <button
        type="button"
        class="flex items-center justify-center px-3 text-red-600 hover:text-red-800 hover:bg-red-50 transition"
        onclick="removeFromCart({{ item.id }}, event)"
      >
        ðŸ—‘
      </button>
    {% endif %}
  </div>
{% endif %}

